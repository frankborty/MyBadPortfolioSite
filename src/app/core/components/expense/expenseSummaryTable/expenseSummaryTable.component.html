<div class="card">
  <p-table showGridlines [size]="'small'" [value]="expenseTypeSummaryList" [scrollable]="true" scrollHeight="800px"
    rowGroupMode="subheader" groupRowsBy="categoryName" [tableStyle]="{'min-width': '60rem'}">
    <ng-template #header>
      <tr>
        <th>Name</th>
        <th>#</th>
        <th>Totale</th>
        <th>Media</th>
        <th>Gen</th>
        <th>Feb</th>
        <th>Mar</th>
        <th>Apr</th>
        <th>Mag</th>
        <th>Giu</th>
        <th>Lug</th>
        <th>Ago</th>
        <th>Set</th>
        <th>Ott</th>
        <th>Nov</th>
        <th>Dic</th>
      </tr>
    </ng-template>
    <ng-template #groupheader let-expenseType>
      <tr pRowGroupHeader class="bg-gray-200">
        <td colspan="16">
          <div class="flex items-center gap-2">
            <span class="font-bold">{{ expenseType.categoryName }}</span>
          </div>
        </td>
      </tr>
    </ng-template>
    
    <ng-template #groupfooter let-expenseType>
        <tr>
            <td colspan="16" class="text-left font-medium">
                {{CalculateCategoryFooter(expenseType.categoryName)}}
            </td>
        </tr>
    </ng-template>

    <ng-template #body let-expenseType let-rowIndex="rowIndex">
      <tr>
        <td>{{expenseType.name}}</td>
        <td>{{expenseType.count}}</td>
        <td>{{ expenseType.total | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.average | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.jan | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.feb | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.mar | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.apr | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.may | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.jun | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.jul | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.aug | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.sep | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.oct | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.nov | number: '1.2-2':'it-IT' }}</td>
        <td>{{ expenseType.dec | number: '1.2-2':'it-IT' }}</td>
      </tr>
    </ng-template>

    <ng-template #footer>
      <tr class="!bg-red-500">
      <td class="font-bold bg-transparent">Totale</td>
      <td class="bg-transparent">{{ totalCount}}</td>
      <td class="bg-transparent">{{ totalSum | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalAvg | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[0] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[1] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[2] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[3] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[4] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[5] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[6] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[7] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[8] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[9] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[10] | number: '1.2-2':'it-IT' }}</td>
      <td class="bg-transparent">{{ totalPerMese[11] | number: '1.2-2':'it-IT' }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>