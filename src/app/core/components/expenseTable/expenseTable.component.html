
  <p-contextmenu #cm [model]="contextMenuItems" />
  <p-table 
    [value]="expenseList"  
    [(contextMenuSelection)]="selectedExpense" 
    [contextMenu]="cm"
    [(selection)]="selectedExpenseList"
    selectionMode="multiple"
    dataKey="id"
    [scrollable]="true"
    [resizableColumns]="true"
    [size]="'small'" 
    showGridlines 
    stripedRows 
    [paginator]="true"
    [rows]="30"
    [rowsPerPageOptions]="[10, 30, 50, 100]">
    <ng-template pTemplate="header">
      <tr>
        <th pResizableColumn pSortableColumn="description" class="text-left w-80">Description
          <p-columnFilter type="text" field="description" display="menu" />
        </th>
        <th pResizableColumn pSortableColumn="amount" class="text-right w-20">Cost â‚¬
          <p-columnFilter type="numeric" field="amount" display="menu" currency="EUR" />
        </th>
        <th pResizableColumn pSortableColumn="expenseType.name" class="text-right w-40">Type
          <p-columnFilter field="expenseType.name" matchMode="in" display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false" class="ml-auto">
            <ng-template #filter let-value let-filter="filterCallback">
              <p-multiselect 
                [filter]="true" 
                [ngModel]="value" 
                [options]="expenseTypesString" 
                placeholder="Any" 
                (onChange)="filter($event.value)" 
                class="w-full">
                <ng-template let-type #item>
                  <div class="flex items-center gap-2">
                    <span>{{ type }}</span>
                  </div>
                </ng-template>
              </p-multiselect>
            </ng-template>
          </p-columnFilter>
        </th>
        <th pResizableColumn pSortableColumn="expenseType.category.name   " class="text-right w-40">Category
          <p-columnFilter field="expenseType.category.name" matchMode="in" display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false" class="ml-auto">
            <ng-template #filter let-value let-filter="filterCallback">
              <p-multiselect 
                [filter]="true" 
                [ngModel]="value" 
                [options]="expenseCategoriesString" 
                placeholder="Any" 
                (onChange)="filter($event.value)" 
                class="w-full">
                <ng-template let-category #item>
                  <div class="flex items-center gap-2">
                    <span>{{ category }}</span>
                  </div>
                </ng-template>
              </p-multiselect>
            </ng-template>
          </p-columnFilter>
        </th>
        <th pResizableColumn pSortableColumn="date" class="text-right w-32">Date
          <p-columnFilter type="date" field="date" display="menu">
            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                <p-calendar  [ngModel]="value" (onSelect)="filter($event)" dateFormat="dd/mm/yy"></p-calendar>
            </ng-template>
          </p-columnFilter>
        </th>
        <th pResizableColumn pSortableColumn="note">Note</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-expense let-rowIndex="rowIndex">
      <tr [pContextMenuRow]="expense"[pSelectableRow]="expense" [pSelectableRowIndex]="rowIndex">
        <td>{{ expense.description }}</td>
        <td class="text-right">{{ expense.amount  | number:'1.1-1' }}</td>
        <td class="text-right">{{ expense.expenseType.name }}</td>
        <td class="text-right">{{ expense.expenseType.category.name }}</td>
        <td class="text-right">{{ expense.date | date: 'dd/MM/yyyy'}}</td>
        <td>{{ expense.note }}</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="6">No expenses found.</td>
      </tr>
    </ng-template>
  </p-table>
